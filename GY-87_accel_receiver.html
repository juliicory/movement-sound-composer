<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GY-87 IMU ‚Üí Strudel (USB)</title>
<link rel="stylesheet" href="GY-87.css">
</head>
<body>
  <h1>üéµ GY-87 IMU ‚Üí Strudel (USB)</h1>
  
  <div class="container">
    <h3>1. Connect Arduino via USB</h3>
    <div class="note">
      ‚ö†Ô∏è <strong>Chrome/Edge only!</strong> WebSerial requires Chrome or Edge browser.<br>
      Make sure Arduino is plugged in via USB cable.
    </div>
    <button id="connectBtn" onclick="connectSerial()">Connect to Arduino</button>
    <div id="status" class="status disconnected">Not connected</div>
  </div>

  <div class="container">
    <h3>2. Live Sensor Data</h3>
    
    <div class="sensor-section">
      <div class="sensor-title">ACCELEROMETER (g-force)</div>
      <div class="data">
        <div class="data-item">
          <div class="data-label">X Axis</div>
          <div class="data-value" id="accelX">0.00</div>
        </div>
        <div class="data-item">
          <div class="data-label">Y Axis</div>
          <div class="data-value" id="accelY">0.00</div>
        </div>
        <div class="data-item">
          <div class="data-label">Z Axis</div>
          <div class="data-value" id="accelZ">0.00</div>
        </div>
        <div class="data-item">
          <div class="data-label">Magnitude</div>
          <div class="data-value" id="accelMag">0.00</div>
        </div>
      </div>
    </div>

    <div class="sensor-section">
      <div class="sensor-title">GYROSCOPE (degrees/sec)</div>
      <div class="data">
        <div class="data-item">
          <div class="data-label">X Rotation</div>
          <div class="data-value" id="gyroX">0.00</div>
        </div>
        <div class="data-item">
          <div class="data-label">Y Rotation</div>
          <div class="data-value" id="gyroY">0.00</div>
        </div>
        <div class="data-item">
          <div class="data-label">Z Rotation</div>
          <div class="data-value" id="gyroZ">0.00</div>
        </div>
        <div class="data-item">
          <div class="data-label">Total Spin</div>
          <div class="data-value" id="gyroMag">0.00</div>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <h3>3. Use in Strudel</h3>
    <div class="instructions">
      Open <a href="https://strudel.cc" target="_blank" style="color: #00ff00;">strudel.cc</a> in <strong>another tab in the same browser</strong> and use these variables:
    </div>
    <div class="code-box">
// ACCELEROMETER (tilt/movement)
window.accelX    // X-axis tilt
window.accelY    // Y-axis tilt  
window.accelZ    // Z-axis
window.accelMag  // Total acceleration

// GYROSCOPE (rotation)  
window.gyroX     // Pitch rate
window.gyroY     // Roll rate
window.gyroZ     // Yaw (spin)
window.gyroMag   // Total rotation
    </div>
  </div>

  <div class="container">
    <h3>Example Patterns</h3>
    
    <div class="code-box">
// Tilt-controlled melody
sound("sine")
  .note(window.accelX * 30 + 60)
  .lpf(window.accelY * 2000 + 500)
  .gain(0.4)
    </div>

    <div class="code-box">
// Spin-activated drums
s("bd sd hh cp")
  .fast(window.gyroMag > 50 ? 4 : 1)
  .gain(Math.min(window.gyroMag / 100, 1))
    </div>

    <div class="code-box">
// Shake detector
s("bd*4")
  .when(window.accelMag > 1.5, x => x.gain(1.2).speed(2))
    </div>
  </div>

  <script src="GY-87.js">
  </script>
</body>
</html>